"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.validatePlugin = void 0;

var _utils = require("../utils");

var supportedHooks = ['afterGetConfig', 'beforePrepareBrowserPlugins', 'afterPrepareBrowserPlugins', 'beforePrepareRoutes', 'getRoutes', 'normalizeRoute', 'afterPrepareRoutes', 'webpack', 'afterDevServerStart', 'beforeRenderToElement', 'beforeRenderToHtml', 'htmlProps', 'headElements', 'beforeHtmlToDocument', 'beforeDocumentToFile', 'afterExport'];

var validatePlugin = function validatePlugin(plugin) {
  var hookKeys = Object.keys(plugin.hooks);
  var badKeys = hookKeys.filter(function (key) {
    return !supportedHooks.includes(key);
  });

  if (badKeys.length) {
    throw new Error("Unknown plugin hooks: \"".concat(badKeys.join(', '), "\" found in plugin: ").concat(plugin.location));
  }
};

exports.validatePlugin = validatePlugin;
var _default = {
  afterGetConfig: function afterGetConfig(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterGetConfig');
    return (0, _utils.reduceHooks)(hooks, {
      sync: true
    })(state);
  },
  beforePrepareBrowserPlugins: function beforePrepareBrowserPlugins(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforePrepareBrowserPlugins');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  afterPrepareBrowserPlugins: function afterPrepareBrowserPlugins(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterPrepareBrowserPlugins');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  beforePrepareRoutes: function beforePrepareRoutes(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforePrepareRoutes');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  getRoutes: function getRoutes(routes, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'getRoutes');
    return (0, _utils.reduceHooks)(hooks)(routes, state);
  },
  normalizeRoute: function normalizeRoute(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'normalizeRoute');
    return function (route) {
      return (0, _utils.reduceHooks)(hooks, {
        sync: true
      })(route, state);
    };
  },
  afterPrepareRoutes: function afterPrepareRoutes(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterPrepareRoutes');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  webpack: function webpack(config, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'webpack');
    return (0, _utils.reduceHooks)(hooks, {
      sync: true
    })(config, state);
  },
  afterDevServerStart: function afterDevServerStart(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterDevServerStart');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  beforeRenderToElement: function beforeRenderToElement(Comp, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeRenderToElement');
    return (0, _utils.reduceHooks)(hooks)(Comp, state);
  },
  beforeRenderToHtml: function beforeRenderToHtml(element, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeRenderToHtml');
    return (0, _utils.reduceHooks)(hooks)(element, state);
  },
  htmlProps: function htmlProps(props, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'htmlProps');
    return (0, _utils.reduceHooks)(hooks)(props, state);
  },
  headElements: function headElements(elements, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'headElements');
    return (0, _utils.reduceHooks)(hooks)(elements, state);
  },
  beforeHtmlToDocument: function beforeHtmlToDocument(html, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeHtmlToDocument');
    return (0, _utils.reduceHooks)(hooks)(html, state);
  },
  beforeDocumentToFile: function beforeDocumentToFile(html, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeDocumentToFile');
    return (0, _utils.reduceHooks)(hooks)(html, state);
  },
  afterExport: function afterExport(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterExport');
    return (0, _utils.reduceHooks)(hooks)(state);
  }
};
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdGF0aWMvcGx1Z2lucy5qcyJdLCJuYW1lcyI6WyJzdXBwb3J0ZWRIb29rcyIsInZhbGlkYXRlUGx1Z2luIiwicGx1Z2luIiwiaG9va0tleXMiLCJPYmplY3QiLCJrZXlzIiwiaG9va3MiLCJiYWRLZXlzIiwiZmlsdGVyIiwia2V5IiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJFcnJvciIsImpvaW4iLCJsb2NhdGlvbiIsImFmdGVyR2V0Q29uZmlnIiwic3RhdGUiLCJwbHVnaW5zIiwic3luYyIsImJlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2lucyIsImFmdGVyUHJlcGFyZUJyb3dzZXJQbHVnaW5zIiwiYmVmb3JlUHJlcGFyZVJvdXRlcyIsImdldFJvdXRlcyIsInJvdXRlcyIsIm5vcm1hbGl6ZVJvdXRlIiwicm91dGUiLCJhZnRlclByZXBhcmVSb3V0ZXMiLCJ3ZWJwYWNrIiwiY29uZmlnIiwiYWZ0ZXJEZXZTZXJ2ZXJTdGFydCIsImJlZm9yZVJlbmRlclRvRWxlbWVudCIsIkNvbXAiLCJiZWZvcmVSZW5kZXJUb0h0bWwiLCJlbGVtZW50IiwiaHRtbFByb3BzIiwicHJvcHMiLCJoZWFkRWxlbWVudHMiLCJlbGVtZW50cyIsImJlZm9yZUh0bWxUb0RvY3VtZW50IiwiaHRtbCIsImJlZm9yZURvY3VtZW50VG9GaWxlIiwiYWZ0ZXJFeHBvcnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQSxJQUFNQSxjQUFjLEdBQUcsQ0FDckIsZ0JBRHFCLEVBRXJCLDZCQUZxQixFQUdyQiw0QkFIcUIsRUFJckIscUJBSnFCLEVBS3JCLFdBTHFCLEVBTXJCLGdCQU5xQixFQU9yQixvQkFQcUIsRUFRckIsU0FScUIsRUFTckIscUJBVHFCLEVBVXJCLHVCQVZxQixFQVdyQixvQkFYcUIsRUFZckIsV0FacUIsRUFhckIsY0FicUIsRUFjckIsc0JBZHFCLEVBZXJCLHNCQWZxQixFQWdCckIsYUFoQnFCLENBQXZCOztBQW1CTyxJQUFNQyxjQUFjLEdBQUcs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YnNCLEVBQUFBLG9CQUFvQixFQUFFLDhCQUFDQyxJQUFELEVBQU92QixLQUFQLEVBQWlCO0FBQ3JDLFFBQU1WLEtBQUssR0FBRyxxQkFBU1UsS0FBSyxDQUFDQyxPQUFmLEVBQXdCLHNCQUF4QixDQUFkO0FBQ0EsV0FBTyx3QkFBWVgsS0FBWixFQUFtQmlDLElBQW5CLEVBQXlCdkIsS0FBekIsQ0FBUDtBQUNELEdBeERZO0FBeURid0IsRUFBQUEsb0JBQW9CLEVBQUUsOEJBQUNELElBQUQsRUFBT3ZCLEtBQVAsRUFBaUI7QUFDckMsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0Isc0JBQXhCLENBQWQ7QUFDQSxXQUFPLHdCQUFZWCxLQUFaLEVBQW1CaUMsSUFBbkIsRUFBeUJ2QixLQUF6QixDQUFQO0FBQ0QsR0E1RFk7QUE2RGJ5QixFQUFBQSxXQUFXLEVBQUUscUJBQUF6QixLQUFLLEVBQUk7QUFDcEIsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0IsYUFBeEIsQ0FBZDtBQUNBLFdBQU8sd0JBQVlYLEtBQVosRUFBbUJVLEtBQW5CLENBQVA7QUFDRDtBQWhFWSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SG9va3MsIHJlZHVjZUhvb2tzIH0gZnJvbSAnLi4vdXRpbHMnXG5cbmNvbnN0IHN1cHBvcnRlZEhvb2tzID0gW1xuICAnYWZ0ZXJHZXRDb25maWcnLFxuICAnYmVmb3JlUHJlcGFyZUJyb3dzZXJQbHVnaW5zJyxcbiAgJ2FmdGVyUHJlcGFyZUJyb3dzZXJQbHVnaW5zJyxcbiAgJ2JlZm9yZVByZXBhcmVSb3V0ZXMnLFxuICAnZ2V0Um91dGVzJyxcbiAgJ25vcm1hbGl6ZVJvdXRlJyxcbiAgJ2FmdGVyUHJlcGFyZVJvdXRlcycsXG4gICd3ZWJwYWNrJyxcbiAgJ2FmdGVyRGV2U2VydmVyU3RhcnQnLFxuICAnYmVmb3JlUmVuZGVyVG9FbGVtZW50JyxcbiAgJ2JlZm9yZVJlbmRlclRvSHRtbCcsXG4gICdodG1sUHJvcHMnLFxuICAnaGVhZEVsZW1lbnRzJyxcbiAgJ2JlZm9yZUh0bWxUb0RvY3VtZW50JyxcbiAgJ2JlZm9yZURvY3VtZW50VG9GaWxlJyxcbiAgJ2FmdGVyRXhwb3J0Jyxcbl1cblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlUGx1Z2luID0gcGx1Z2luID0+IHtcbiAgY29uc3QgaG9va0tleXMgPSBPYmplY3Qua2V5cyhwbHVnaW4uaG9va3MpXG4gIGNvbnN0IGJhZEtleXMgPSBob29rS2V5cy5maWx0ZXIoa2V5ID0+ICFzdXBwb3J0ZWRIb29rcy5pbmNsdWRlcyhrZXkpKVxuICBpZiAoYmFkS2V5cy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVW5rbm93biBwbHVnaW4gaG9va3M6IFwiJHtiYWRLZXlzLmpvaW4oJywgJyl9XCIgZm91bmQgaW4gcGx1Z2luOiAke1xuICAgICAgICBwbHVnaW4ubG9jYXRpb25cbiAgICAgIH1gXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgYWZ0ZXJHZXRDb25maWc6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlckdldENvbmZpZycpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzLCB7IHN5bmM6IHRydWUgfSkoc3RhdGUpXG4gIH0sXG4gIGJlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2luczogc3RhdGUgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2lucycpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcbiAgfSxcbiAgYWZ0ZXJQcmVwYXJlQnJvd3NlclBsdWdpbnM6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlclByZXBhcmVCcm93c2VyUGx1Z2lucycpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcbiAgfSxcbiAgYmVmb3JlUHJlcGFyZVJvdXRlczogc3RhdGUgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZVByZXBhcmVSb3V0ZXMnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXG4gIH0sXG4gIGdldFJvdXRlczogKHJvdXRlcywgc3RhdGUpID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdnZXRSb3V0ZXMnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykocm91dGVzLCBzdGF0ZSlcbiAgfSxcbiAgbm9ybWFsaXplUm91dGU6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdub3JtYWxpemVSb3V0ZScpXG4gICAgcmV0dXJuIHJvdXRlID0+IHJlZHVjZUhvb2tzKGhvb2tzLCB7IHN5bmM6IHRydWUgfSkocm91dGUsIHN0YXRlKVxuICB9LFxuICBhZnRlclByZXBhcmVSb3V0ZXM6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlclByZXBhcmVSb3V0ZXMnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXG4gIH0sXG4gIHdlYnBhY2s6IChjb25maWcsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnd2VicGFjaycpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzLCB7IHN5bmM6IHRydWUgfSkoY29uZmlnLCBzdGF0ZSlcbiAgfSxcbiAgYWZ0ZXJEZXZTZXJ2ZXJTdGFydDogc3RhdGUgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2FmdGVyRGV2U2VydmVyU3RhcnQnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXG4gIH0sXG4gIGJlZm9yZVJlbmRlclRvRWxlbWVudDogKENvbXAsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYmVmb3JlUmVuZGVyVG9FbGVtZW50JylcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKENvbXAsIHN0YXRlKVxuICB9LFxuICBiZWZvcmVSZW5kZXJUb0h0bWw6IChlbGVtZW50LCBzdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZVJlbmRlclRvSHRtbCcpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShlbGVtZW50LCBzdGF0ZSlcbiAgfSxcbiAgaHRtbFByb3BzOiAocHJvcHMsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnaHRtbFByb3BzJylcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKHByb3BzLCBzdGF0ZSlcbiAgfSxcbiAgaGVhZEVsZW1lbnRzOiAoZWxlbWVudHMsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnaGVhZEVsZW1lbnRzJylcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKGVsZW1lbnRzLCBzdGF0ZSlcbiAgfSxcbiAgYmVmb3JlSHRtbFRvRG9jdW1lbnQ6IChodG1sLCBzdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZUh0bWxUb0RvY3VtZW50JylcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKGh0bWwsIHN0YXRlKVxuICB9LFxuICBiZWZvcmVEb2N1bWVudFRvRmlsZTogKGh0bWwsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYmVmb3JlRG9jdW1lbnRUb0ZpbGUnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoaHRtbCwgc3RhdGUpXG4gIH0sXG4gIGFmdGVyRXhwb3J0OiBzdGF0ZSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYWZ0ZXJFeHBvcnQnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXG4gIH0sXG59XG4iXX0=